[PlatformTest]
type = "SandboxManagerFilter"
working_directory = "%ENV[HEKA_PLUGINS_BASE_DIR]"
message_signer = "PlatformTest"
max_filters = 100
[ProtobufDecoder]
[TcpPlatformTest]
type = "TcpInput"
parser_type = "message.proto"
decoder = "ProtobufDecoder"
address = ":5006"
    [TcpPlatformTest.signer.PlatformTest_0]
    hmac_key = "Platform test"


[TestDecoder]
type = "SandboxDecoder"
filename = "%ENV[HEKA_PLUGINS_BASE_DIR]/test/testDecoder.lua"
[UdpInput]
address = ":5005"
parser_type = "regexp"
delimiter = "\n"
decoder = "TestDecoder"

[TestEncoder]
type = "SandboxEncoder"
filename = "%ENV[HEKA_PLUGINS_BASE_DIR]/test/testEncoder.lua"
[UdpOutput]
message_matcher = "Type == 'heka.sandbox.output'"
address = ":5007"
encoder = "TestEncoder"
